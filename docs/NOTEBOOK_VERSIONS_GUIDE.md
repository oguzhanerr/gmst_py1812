# Notebook Versions Quick Reference\n\n## Overview\n\nThree versions of `mobile_get_input` notebook, each optimized for different use cases:\n\n| Version | Status | Cells | Use Case | Location |\n|---------|--------|-------|----------|----------|\n| **Original** | Legacy | 25 | Reference (messy) | `data/notebooks/mobile_get_input.ipynb` |\n| **Phase 1** | ‚úÖ Complete | 18 | Learning/Configuration | `data/notebooks/mobile_get_input_phase1.ipynb` |\n| **Phase 2** | ‚úÖ Complete | 9 | Production (recommended) | `data/notebooks/mobile_get_input_phase2.ipynb` |\n| **Phase 3** | ‚è≥ Planned | ~12 | Speed-optimized | `data/notebooks/mobile_get_input_phase3.ipynb` |\n\n---\n\n## Version Comparison\n\n### Phase 1: Configuration Consolidated\n\n**Best for**: Understanding the notebook, modifying configuration easily\n\n**Improvements**:\n- ‚úÖ Single CONFIG dict (instead of 5+ scattered cells)\n- ‚úÖ Clear section headers\n- ‚úÖ All parameters documented with units\n- ‚ö†Ô∏è Still has all functions defined inline (not reusable)\n\n**When to use**:\n- Learning how the notebook works\n- Modifying transmitter location or parameters\n- First-time setup\n\n**Example usage**:\n```python\n# Edit this once, clear intent:\nCONFIG = {\n    'TRANSMITTER': {\n        'longitude': -13.40694,\n        'latitude': 9.345,\n        'antenna_height_tx': 57,\n    },\n    ...\n}\n```\n\n---\n\n### Phase 2: Modular (RECOMMENDED)\n\n**Best for**: Production use, maintainability, code reuse\n\n**Improvements**:\n- ‚úÖ Functions moved to `gmst_py1812.propagation.profile_extraction` module\n- ‚úÖ Much smaller notebook (9 cells vs 25)\n- ‚úÖ Functions are testable and reusable\n- ‚úÖ Cleaner, easier to maintain\n- ‚úÖ Credential handling more secure\n\n**When to use**:\n- Running profiles regularly\n- Want to extend functionality\n- Integrating with other scripts\n- This is the **recommended version**\n\n**Example usage**:\n```python\nfrom gmst_py1812.propagation.profile_extraction import generate_profile_points\n\ngdf = generate_profile_points(\n    tx_lon, tx_lat, max_distance_km, n_points, azimuth_deg,\n    tif_path, lcm10_to_ct, ct_to_r\n)\n```\n\n---\n\n### Phase 3: Optimized (Coming Soon)\n\n**Best for**: Large batch processing, performance-critical applications\n\n**Improvements**:\n- ‚úÖ Batch API calls (50-100x faster)\n- ‚úÖ Single elevation query (not per-azimuth)\n- ‚úÖ Single land cover read (not per-azimuth)\n- ‚úÖ Progress indicators with tqdm\n- ‚úÖ Optional caching\n- ‚úÖ Optional parallel processing\n\n**When to use**:\n- Processing 10+ transmitters\n- Performance is critical\n- Want real-time progress feedback\n\n**Example usage**:\n```python\nfrom gmst_py1812.propagation.profile_extraction import batch_generate_all_profiles\n\nprofiles = batch_generate_all_profiles(\n    tx_lon, tx_lat, max_distance_km, azimuths,\n    sampling_resolution, tif_path,\n    lcm10_to_ct, ct_to_r,\n    show_progress=True\n)\n\n# Returns list of GeoDataFrames (one per azimuth)\nfor az, gdf in zip(azimuths, profiles):\n    print(f\"Azimuth {az}: {len(gdf)} points\")\n```\n\n---\n\n## Feature Matrix\n\n| Feature | Phase 1 | Phase 2 | Phase 3 |\n|---------|---------|---------|---------|\n| Consolidated Config | ‚úÖ | ‚úÖ | ‚úÖ |\n| Modular Functions | ‚ùå | ‚úÖ | ‚úÖ |\n| Reusable Module | ‚ùå | ‚úÖ | ‚úÖ |\n| Unit Testable | ‚ùå | ‚úÖ | ‚úÖ |\n| Batch Processing | ‚ùå | ‚ùå | ‚úÖ |\n| Progress Indicators | ‚ùå | ‚ùå | ‚úÖ |\n| Caching | ‚ùå | ‚ùå | ‚úÖ |\n| Speed (vs Phase 1) | 1x | 1x | 50-100x |\n\n---\n\n## Decision Tree\n\n```\nStarting with mobile_get_input?\n‚îÇ\n‚îú‚îÄ Learning / First time?\n‚îÇ  ‚îî‚îÄ> Use Phase 1 (consolidated config)\n‚îÇ\n‚îú‚îÄ Production use / Regular runs?\n‚îÇ  ‚îî‚îÄ> Use Phase 2 (modular, recommended)\n‚îÇ\n‚îî‚îÄ Performance critical / Many transmitters?\n   ‚îî‚îÄ> Use Phase 3 (optimized, batched)\n```\n\n---\n\n## File Locations\n\n### Notebooks\n```\ndata/notebooks/\n‚îú‚îÄ‚îÄ mobile_get_input.ipynb              (original, ~25 cells)\n‚îú‚îÄ‚îÄ mobile_get_input_phase1.ipynb       (config consolidated, 18 cells)\n‚îú‚îÄ‚îÄ mobile_get_input_phase2.ipynb       (modular, 9 cells) ‚Üê RECOMMENDED\n‚îî‚îÄ‚îÄ mobile_get_input_phase3.ipynb       (optimized, ~12 cells, planned)\n```\n\n### Module\n```\nsrc/gmst_py1812/propagation/\n‚îî‚îÄ‚îÄ profile_extraction.py               (340 lines, 5 functions)\n    ‚îú‚îÄ‚îÄ meters_to_deg()\n    ‚îú‚îÄ‚îÄ get_token()\n    ‚îú‚îÄ‚îÄ resolve_credentials()\n    ‚îú‚îÄ‚îÄ landcover_at_point()\n    ‚îî‚îÄ‚îÄ generate_profile_points()\n    ‚îî‚îÄ‚îÄ [Phase 3: batch_generate_all_profiles()]\n```\n\n### Documentation\n```\n‚îú‚îÄ‚îÄ NOTEBOOK_CLEANUP_SUGGESTIONS.md     (original analysis)\n‚îú‚îÄ‚îÄ NOTEBOOK_REFACTORING_REPORT.md      (completion status)\n‚îú‚îÄ‚îÄ PHASE3_OPTIMIZATION_GUIDE.md        (Phase 3 implementation)\n‚îî‚îÄ‚îÄ NOTEBOOK_VERSIONS_GUIDE.md          (this file)\n```\n\n---\n\n## Migration Path\n\n### From Original ‚Üí Phase 1\n```\n1. Open mobile_get_input_phase1.ipynb\n2. Modify CONFIG dict with your settings\n3. Run cells in order\n4. Done! Same outputs as original\n```\n\n### From Phase 1 ‚Üí Phase 2 (Recommended)\n```\n1. Open mobile_get_input_phase2.ipynb\n2. Modify CONFIG dict (same as Phase 1)\n3. Run cells in order\n4. Functions are now from module (import at top)\n5. Notebook is much smaller\n```\n\n### From Phase 2 ‚Üí Phase 3 (When ready)\n```\n1. Update to mobile_get_input_phase3.ipynb\n2. Same CONFIG dict\n3. Use batch_generate_all_profiles() function\n4. 50-100x faster!\n```\n\n---\n\n## Configuration (Same for All Versions)\n\n```python\nCONFIG = {\n    'TRANSMITTER': {\n        'tx_id': 'TX_0001',\n        'longitude': -13.40694,      # Edit this\n        'latitude': 9.345,           # Edit this\n        'antenna_height_tx': 57,     # meters\n        'antenna_height_rx': 10,     # meters\n    },\n    'P1812': {\n        'frequency_ghz': 0.9,        # 0.03-6 range\n        'time_percentage': 50,       # 1-50 range\n        'polarization': 1,           # 1=horizontal, 2=vertical\n    },\n    'RECEIVER_GENERATION': {\n        'max_distance_km': 11,       # radius in km\n        'azimuth_step': 10,          # degrees\n        'distance_step': 0.5,        # km\n        'sampling_resolution': 30,   # meters per point\n    },\n    'SENTINEL_HUB': {\n        'buffer_m': 11000,           # buffer around TX\n        'chip_px': 734,              # pixels\n        'year': 2020,\n    },\n    # Land cover classifications (usually don't edit)\n    'LCM10_TO_CT': {...},\n    'CT_TO_R': {...},\n}\n```\n\n---\n\n## Performance Comparison\n\n```\nProcessing 36 azimuths √ó 366 points each:\n\nPhase 1/2: ~30 seconds\n  - GeoTIFF opened 36 times\n  - Elevation queried 36 times\n  - Zones joined 36 times\n\nPhase 3: ~1 second (estimated)\n  - GeoTIFF opened 1 time\n  - Elevation queried 1 time\n  - Zones joined 1 time\n  - Result: 30x faster!\n```\n\n---\n\n## Troubleshooting\n\n### \"ModuleNotFoundError: No module named 'gmst_py1812'\"\n\n**Solution** (Phase 2 only):\n```python\n# Add to imports cell:\nimport sys\nfrom pathlib import Path\nsys.path.insert(0, str(Path.cwd() if (Path.cwd() / 'src').exists() else Path.cwd().parent))\n```\n\n### \"FileNotFoundError: config_sentinel_hub.py not found\"\n\n**Solution**:\n- Make sure you're in the project root directory\n- `config_sentinel_hub.py` should be in the project root\n- Update credentials in `config_sentinel_hub.py`\n\n### \"Credentials not found\"\n\n**Solution** (all versions):\n```python\n# Option 1: Set environment variables\nexport SH_CLIENT_ID='your_client_id'\nexport SH_CLIENT_SECRET='your_client_secret'\n\n# Option 2: Update config_sentinel_hub.py\nSH_CLIENT_ID = 'your_client_id'\nSH_CLIENT_SECRET = 'your_client_secret'\n```\n\n---\n\n## Summary\n\n- **Phase 1**: Learn the structure (consolidated config)\n- **Phase 2**: Use for production (modular, recommended)\n- **Phase 3**: Use for speed (optimized, coming soon)\n\nüëâ **Start with Phase 2** unless you're learning the system for the first time.\n"